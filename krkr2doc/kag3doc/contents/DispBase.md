# 背景を表示しよう

背景というのは、要するに文字と前景の後ろに表示されるヤツです。KAG では、(デフォルトでは) 640×480 のサイズの画像を背景として読み込みます。

　ためしに、なにか表示させたい 640×480 の画像を bgimage フォルダにおいてみてください。この画像を bg0.jpg であるとします。KAG の LZH ファイルにはこの画像は入っていないので、適当にどこかから持ってきてくださいね(^^)
　そして、[文字を表示しよう](Letter) で使用したシナリオを、以下のように変えてみます。

`[image storage="bg0" page=fore layer=base]
[wait time=200]
*start|スタート
[cm]
こんにちは。`

　ここで image というタグを使用して、bg0.jpg を表ページの背景レイヤに読み込んでいます。
　image タグの storage 属性で指定したファイルを読み込むのですが、拡張子は省略できます。勝手に KAG が探してきます(^^)

　とりあえず実行してみてください。

![BG_Displayed.jpg](BG_Displayed.jpg)
背景を表示した

　で、「表ページ」「背景レイヤ」ってなに？ってことになるのですが・・・

Note

　Config.tjs の scWidth および scHeight で、画面サイズに 640x480 以外の画面サイズを指定した場合は、もちろんその画像サイズに合った背景画像を指定してください。

# KAG のレイヤ構成

KAG というか吉里吉里は、画面はすべて「レイヤ」と呼ばれるものを重ね合わせて構成されます ( Photoshop 等のレイヤーと似ています; レイヤーをレイヤと書くのは作者のクセ )。

　たとえば、以下のような表示になっていたとすると・・・

![Layers.jpg](Layers.jpg)
表示例

　レイヤ構成は以下のようになっています。

![LayersDesc.jpg](LayersDesc.jpg)
レイヤ構成

　KAG では、背景レイヤ base がまず一枚あって、一番奥(下)に表示されます。それより手前(上)に３枚の前景レイヤ 0 1 2 があります。さらにその手前(上)に２枚のメッセージレイヤがあります。すべての前景レイヤと、メッセージレイヤ 1 は初期状態では非表示です ( 非表示のレイヤは layopt タグで visible=true とすることで表示することができます。前景レイヤの場合は image タグでも表示することができます )。
　これと同じレイヤ構成が KAG では２組あって、それぞれ表ページ fore 、裏ページ back と呼ばれています。表ページは画面に表示されますが、裏ページは画面に表示することはできません。裏ページは、主にトランジション(画面切り替え)用に、画像を一時的においておくために使います。

　image タグの page 属性及び layer 属性で指定していたのは、それぞれ、表ページが裏ページか ( fore / back )、背景レイヤか前景レイヤか ( base / 0 / 1 / 2 )かを指定したわけです。

Note

　前景レイヤ 3 枚、メッセージレイヤ 2 枚という数は、Config.tjs のデフォルトの設定です。
　メッセージレイヤや前景レイヤの初期の枚数は Config.tjs の numCharacterLayers および numMessageLayers で指定できるほか、laycount タグで実行中に変更することもできます。

Note

　「背景」「前景」「表」「裏」はそれぞれ混乱の元となりやすいですが、page 属性に指定する fore は「表画面」を表すもので、「前景レイヤ」を表すものではありません。
　表ページか裏ページかは page 属性でそれぞれ fore, back で指定し、前景レイヤの場合は layer 属性に 0 1 2 ・・・を指定し、背景レイヤの場合は base を指定します。