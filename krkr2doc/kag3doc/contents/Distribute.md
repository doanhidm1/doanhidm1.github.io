# プロジェクトフォルダの自動実行

吉里吉里は起動時には、プロジェクトフォルダを選択する画面がでます。これを出さずにプロジェクトフォルダを吉里吉里の起動と同時に実行するには以下の方法があります。

プロジェクトフォルダを data に改名する
:   プロジェクトフォルダの名前を "data" にして、吉里吉里実行可能ファイル ( krkr.eXe ) と同じフォルダにおくと、吉里吉里起動時に自動的にそのプロジェクトフォルダを実行するようになります。

Releaser で data.xp3 というファイルを作る
:   後述の Releaser で data.xp3 という名前で xp3 アーカイブファイルを作り、吉里吉里実行可能ファイルと同じフォルダにおくと、吉里吉里起動時に自動的にそのアーカイブを実行するようになります。

Releaser で実行可能ファイルを作成する
:   Releaser で実行可能ファイルを直接作成することができます。
    　しかしこの場合は後述のパッチを配布するときに少々面倒だったり、一部のウィルス対策ソフトウェアとの相性が悪いので、単一の実行可能ファイルを作成することがそれほど強い要求でなければ、上記の data.xp3 を作成する方法をお勧めします。

　Releaser の使い方は 吉里吉里 SDK ヘルプを参照してください。

# 配布ファイル

実際に配布先でゲームを動作させる場合に含めなくてはならないファイルやフォルダがいくつかあります。

吉里吉里実行可能ファイル
:   Relesaer で実行可能ファイルを出力しなかった場合、実行可能ファイルを共に配布する必要があります。実行可能ファイル ( krkr.eXe ) は名前を変更してもかまいません。また、吉里吉里設定 ( krkrconf.exe ) でアイコンを変更することもできます。

拡張子が cf のファイル
:   吉里吉里設定 (krkrconf.exe) で設定を行うと、吉里吉里実行可能ファイルと同じ名前で、拡張子が .cf になったファイルが出力されます。ここには -datapath オプションなどの重要なオプションが記述されていますから、これをともに配布する必要があります。
    　特にこのファイルが無いならば配布する必要はありません。

krmovie.dll
:   ゲーム内で MPEG によるムービーを再生する場合は共に配布しなければなりません。このファイルは吉里吉里の実行可能ファイル ( Releaser で出力した実行可能ファイルも含む ) と同じフォルダに設置しなければなりません。

krflash.dll
:   ゲーム内で Flash コンテンツを再生する場合は共に配布しなければなりません。このファイルは吉里吉里の実行可能ファイル ( Releaser で出力した実行可能ファイルも含む ) と同じフォルダに設置しなければなりません。

そのほかのプラグイン
:   吉里吉里の実行可能ファイルと同じフォルダか、吉里吉里実行可能ファイルのフォルダにある plugin フォルダに設置しなければなりません。
    　プロジェクトフォルダ内にプラグインを配置することも出来ますが、*推奨されません*。出来れば吉里吉里の実行可能ファイルと同じフォルダか、吉里吉里実行可能ファイルのフォルダにある plugin フォルダにおいて配布した方が良いです ( プロジェクトフォルダ内にプラグインを配置し、アーカイブ内に含めると CD-ROM 上から直接実行する際などにエラーになります )。

セーブデータフォルダ
:   吉里吉里実行可能ファイルと同じフォルダにセーブデータを作成する場合をのぞき、セーブデータを格納するフォルダも共に配布しなければなりません。とくに lzh などで圧縮する場合、空のフォルダは展開されない場合があるので、そのようなアーカイブ形式で配布する場合は、セーブデータのフォルダにダミーのファイルを入れておくとよいでしょう。

そのほか、吉里吉里 SDK ヘルプ「ファイル/フォルダ覧」も参考にしてください。

# エンドユーザ向け設定ツールの配布

エンドユーザが吉里吉里の設定を簡単に行えるようにするために、エンドユーザ向け設定ツール エンジン設定.exe をゲームと共に、あるいはゲームと別に配布することができます。
　これらの使い方については吉里吉里 SDK ヘルプを参照してください。

　配布容量に問題がないなら、このツールはゲームなどとともに配布することを強くお勧めします。

# ファイル破損チェックツールの配布

インストール時やインストール後に破損したファイルを検出するためのツールである「ファイル破損チェックツール」 ファイル破損チェックツール.exe をゲームと共に、あるいはゲームと別に配布することができます。
　これらの使い方については吉里吉里 SDK ヘルプを参照してください。

# パッチ配布

ゲームを配布した後、修正を行う必要が生じた場合、修正のあったファイルのみを「パッチ ( つぎはぎ ) 」という形で配布することができます。

吉里吉里実行コアのパッチ
:   吉里吉里実行コアに修正の必要が生じた場合です。
    　Releaser で実行可能ファイルではなく、xp3 形式アーカイブを出力した場合は、新しい吉里吉里実行可能ファイルを古い実行可能ファイルの上に上書きするだけです。
    　Releaser で実行可能ファイルを出力した場合はやっかいです。以下のことを行う必要があります。

    1. それまでの実行可能ファイルを data.xp3 に名前を変える
    2. 新しい実行可能ファイル ( 改名されていてもかまいません ) をそのファイルと同じフォルダにコピーする
    3. その新しい実行可能ファイルを実行するようにする

プロジェクトフォルダ内のパッチ
:   KAG は、吉里吉里実行可能ファイルと同じフォルダに patch.xp3 というファイルがあった場合、このファイルの中身を優先的に見に行くという機能があります。
    　この patch.xp3 を作成するには、修正のあったファイルや、追加されたファイルのみを一つのフォルダにまとめ、Releaser でそのフォルダを指定して patch.xp3 ファイルを作成します。
    　また、patch2.xp3 や patch3.xp3, patch4.xp3 ・・・のように、patch2.xp3 以降のファイルがある場合は、それらも読み込まれます。これらのファイルや、元々配布されていた ( パッチではないもとの ) ファイルの中に同名のファイルがある場合は、数字の大きいパッチファイルの中のファイルが優先されて使用されます。patch2.xp3, patch3.xp3, patch4.xp3 ・・・のならびに欠番があった場合はそこでパッチ用アーカイブを探すのをやめてしまいますので注意してください。

# トラブルシューティング

エンドユーザ向け設定ツールを配布した場合は、ユーザ自身である程度のトラブルシューティングを行うことができます。
　また、吉里吉里設定でコンソールのログを出力するようにしておくと、トラブル時の非常に有用な解析資料となります。コンソールのログは、栞の保存先ディレクトリに krkr.console.log として存在します。

# 著作権等

SDK 付属の license.txt は必ずお読みください。