# 吉里吉里2と比較して、吉里吉里Zが進んでいる機能

初期リリースバージョンに比べて吉里吉里Zは進化を続けていて、吉里吉里2と比較していくつかのメリットが発生しています。

## 吉里吉里Zのメリット

### MPEG4 AVC(H.264) 動画の再生

吉里吉里ZではH.264の再生が可能になっています。
ライセンスの問題があるので、合計12分を超える場合はライセンスフィーが発生しますが、高画質/高圧縮率の動画を組み込めます。

### 64bitサポート

吉里吉里Zには64bit版もあり、メモリを大量に使う場合に効果を発揮します。
フルHDサイズのゲームでは32bitの場合、しばらくプレイしているとメモリ不足で停止してしまうことがありますが、64bitであればほぼそのようなことを気にせず開発できます。

### メモリ利用効率の改善

吉里吉里2ではHDサイズ辺りでもしばらくプレイしていると「ビットマップ用メモリを確保できません/……」と言ったエラーが発生することがありますが、吉里吉里Zではメモリの断片化をなるべく防ぐように強化されているため、このエラーが発生しづらくなっています。
さらに、どうしても改善しない場合は64bit版を使うこともできます。

### より高画質な拡大縮小機能

吉里吉里2ではバイキュービックまで一部サポートされていましたが、吉里吉里Zでは他に Lanczos2、Lanczos3、Spline16、Spline36、面積平均(縮小のみ)、Gaussian、BlackmanSinc がサポートされています。
また、バイキュービックも吉里吉里2に比べ大幅に高速化されており、吉里吉里2では速度的に高速バイリニアより高画質な拡大縮小は使用しづらかったですが、吉里吉里Zでは拡大縮小処理が全面的に書き換えられ、高速がされ、実用的な速度で動作します。
画質は[画像拡大縮小フィルタ](TJS2/imagescaling)を参照してください。

### SSE2/AVX2のサポート

吉里吉里2では、画像処理にはMMXまでのサポートでしたが、吉里吉里ZではSSE2、一部はAVX2までサポートしており、最近のCPUではより高速な動作が可能です。

### コンパイラの進化による最適化の恩恵

吉里吉里2は18年前のコンパイラでコンパイルされているのに対して、吉里吉里Zは順次新しいコンパイラでコンパイルされているため、全般的に高速に動作します。
特にJPEGの読み込みなど一部の機能については劇的に速くなっています。

### opus 音声のサポート

吉里吉里Zではkropus.dllプラグインによってopus音声がサポートされています。
opusはogg vorbisと比較して、より高音質、高圧縮で低レイテンシといったメリットがあり、大きな容量を占める音声データの圧縮に寄与します。
厳密にいえばkropus.dllは吉里吉里2でも動くと思われますが、正式サポートしているわけではありません。

### FreeType による文字のレンダリング

FreeType を使用した文字のレンダリングを選択することが可能になり、文字が綺麗に描画可能です。
(体感できない場合もあります)

### 画像ファイルの保存機能

吉里吉里2では、Bitmap以外の画像を保存できませんでしたが、吉里吉里ZではPNG/JPEG/TLGと言った読み込み可能な画像ファイル形式でLayer画像を保存可能です。

### 画像の非同期読み込み

吉里吉里Zでは画像データをバックグラウンドで読み込むことが可能になり、画像データを先読みすることで従来よりストレスなくプレイ可能なシステムを作ることができます。

### 高繊細ディスプレイ対応

吉里吉里2は高繊細ディスプレイに対応しておらず、高繊細ディスプレイで起動すると意図したよりも大きなサイズで起動してしまったりしますが、吉里吉里Zでは常に指定したサイズで起動されます。

### タッチパネル/マルチタッチ対応

吉里吉里Zではタッチパネルに対応し、マルチタッチも処理できます。
タッチパネルに対応したシステムを作ることでタブレット等でもストレスなくプレイ可能な環境を作ることができます。

### 不具合の修正

吉里吉里2は開発が停止しており、新OSで使用する場合にいくつかの機能で不具合が発生します。
またXP3が2GBを超えるとエラーになるなどの問題も残ったままです。
吉里吉里Zは継続的に開発されており、新OSでも問題なく動くように修正が加えられ続けています。
また、吉里吉里2の時にあった不具合も修正され続けています。

### 多言語対応

吉里吉里Zは、多言語対応されており、非日本語環境でも動作します。
またエラーメッセージなどは日本語/英語/中国語がサポートされています。

### theora動画の再生

Ogg Theora動画も再生できます。
WMVがあるので、あまり活躍の場面はないですが、使いたい場合は使えます。

### 他の便利な機能

TJS2スクリプトを直接書いている場合、9patch機能やArray/Dictionayのpack/unpack、Array/DictionayのloadStructメソッドによるセーブデータによるスクリプト実行回避、ImageFunctionとBitmapクラスによる柔軟なスクリプトの記述、Rectクラスの追加、マウスのX1/X2(進む/戻る)ボタンサポート、UTF-8のサポート等細かい部分で便利な機能が追加されています。

### [このドキュメントのライセンス](LICENSE)