# 文字列に対する操作

TJS2 では、文字列は擬似的に String クラスのオブジェクトということになっていますが、String クラスは存在していませんし、実際に String クラスのオブジェクトというわけではありません ( ただし 文字列に対して typeof 演算子を使うと "String" を返します )。
　しかし 文字列をオブジェクトと見立てて、いくつかのメソッドやプロパティが使用可能になっています。

# length

length プロパティは、文字列の長さを返します。メソッドではなくてプロパティですので注意してください。ただし、このプロパティへの値の代入はできません。

　TJS では内部的に文字をすべて UNICODE で扱っていますので、全角文字も 1 文字、半角文字も 1 文字と数えられます。

`例:
    var str = "abc漢字";
    var n = str.length;  // n には 5 が代入される
    var n = "abc漢字".length; // これも同じく 5 が代入される`

# '数値' プロパティ

数値をプロパティとして間接指定すると、その文字位置にある文字にアクセスできます。
　たとえば、str が文字列あるいは文字列を表す式だとすると、str[0] は先頭の一文字を表す文字列になります。
　数値が文字列よりも長い位置や、負の場合は例外が発生します ( ただし文字列の最後の文字は 空文字 が返されます )。

　代入式を生成することはできません。

`例:
    var str = "abcdef";
    var c = str[0];  // 'a' が c に代入される
    var c = str[2];  // 'c' が c に代入される
    str[3] = 'A'; // 代入式は生成できないのでエラーになる
    var c = str[100]; // c 値が範囲外なのでエラーになる
    var c = str[6]; // 空文字 '' が代入される`

# charAt

charAt メソッドは、文字列の指定位置で指定された位置の文字を返します。 '数値' プロパティと同様の動作をしますが、範囲外の場合は常に空文字列を返します (例外を出しません)。

`構文 : charAt(<文字位置>)`

`例:
    var str = "abcdef";
    var c = str.charAt(3); // 'd' が c に代入される`

# indexOf

indexOf メソッドは、部分文字列の位置を返します。

`構文 : indexOf(<部分文字列>[,<検索開始位置>])`

　文字列から、<部分文字列> を<検索開始位置>から検索し、最初に見つかった位置を返します。 0 が返されれば文字列の先頭です。-1 が返されたときは見つからなかったときです。<検索開始位置>を省略すると、文字列の先頭からの検索になります。

`例:
    var str = "abcdefghijkl";
    var n = str.indexOf("fgh"); // n には 5 が代入される
    var n = str.indexOf("xyz"); // n には -1 が代入される`

# toLowerCase

このメソッドに引数はありません。
　toLowerCase は、文字列のアルファベットを小文字にした文字列を返します。
　全角文字は変換されません。

　これらのメソッドは、もとの文字列には影響を与えません。

`例:
    var lwr="ABCDEF".toLowerCase(); // lwr には "abcdef" が代入される`

Note

　現バージョンの TJS2 では 文字コード 0x80 未満の文字に対してのみ変換を行います。

# toUpperCase

このメソッドは toLowerCase と逆で、小文字のアルファベットを大文字にした文字列を返します。

# substring

substring メソッドは、文字列の部分文字列を返します。

`構文 : substring(<開始文字位置>[,<文字数>])`

　文字列の、<開始文字位置>から<文字数分>の部分文字列を返します。元の文字列に影響は与えません。<文字数> を省略すると、<開始文字位置> 以降の文字列がすべて返されます。
　JavaScript の同メソッドとは引数の意味が違うので注意してください。

`例:
    var ss="abcdefghijkl".substring(3,3); // ss には "def" が代入される`

# substr

substring と同じです。

# sprintf

sprintf メソッドは、文字列を書式化します。

`構文 : sprintf(引数, 引数, ....)`

　文字列を書式文字列と見なし、C言語における sprintf 同様のテキストのフォーマッティングを行った文字列を返します。元の文字列には影響を与えません。

`例:
    var formatted = "%04X %c %5d".sprintf(v1, v2, dic[v1]);`

# replace

replace メソッドは、文字列の置き換えを行います。

`構文 : replace(<パターン>, <置き換え後文字列>)`

　正規表現パターンに従って文字列の置き換えを行い、置き換えを行ったあとの文字列を返します。元の文字列には影響を与えません。
　動作については [RegExp クラス](regexp) の replace メソッドを参照してください。

# split

split メソッドは、文字列を分割します。

`構文 : split(<パターン/デリミタ集合>, <(予約)>, <空の要素を無視するか=false>)`

　文字列を分割した結果が格納された配列オブジェクトを返します。

　[Array クラス](array) の split メソッドも参照してください (引数の順番に注意してください)。

# escape

escape メソッドは、文字列を、TJSの文字列即値内で表現可能な形式に変換します。\ や " などの記号はすべて \ 記号を用いて特殊な用途として解釈されなくされます (エスケープされます)。

`構文 : escape()`

　エスケープされた文字列を返します。元の文字列には影響を与えません。

`例:
    var escaped = str.escape(); // str 中の " は \" に、\ は \\ に変換されるなど`

# trim

trim メソッドは、文字列の先頭と最後の空白を取り除いた文字列を返します。元の文字列には影響を与えません。
　先頭と最後の空白とは、文字コードがU+0001縲弑+0020の文字を指します。つまり、ASCII制御文字なども含まれますが、いわゆる全角の空白は含みません。
　連続して先頭または最後にこれらの空白があった場合は、すべて取り除かれます。

`構文 : trim()`

　先頭と末尾の空白文字が削除された文字列を返します。元の文字列には影響を与えません。

`例:
    var str = "  Hoge ".trim(); // str は "Hoge" です。`

# reverse

reverse メソッドは、文字の並びを逆転した文字列を返します。元の文字列には影響を与えません。
　現バージョンのTJS2では、UTF-16のうちサロゲートペアを含む文字列の動作は保証しません。

`構文 : reverse()`

　文字の並びを逆転した文字列を返します。元の文字列には影響を与えません。

`例:
    var str = "Hoge".reverse(); // str は "egoH" です。`

# repeat

repeat メソッドは、指定した回数だけ文字列を繰り返した文字列を返します。元の文字列には影響を与えません。

`構文 : repeat(count)`

　count個、この文字列を繰り返した文字列を返します。元の文字列には影響を与えません。

`例:
    var str = "Hoge".repeat(3); // str は "HogeHogeHoge" です。`